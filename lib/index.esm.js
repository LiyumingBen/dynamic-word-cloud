import{defineComponent as t,reactive as e,onMounted as n,openBlock as o,createElementBlock as a,Fragment as d,renderList as i,normalizeStyle as l,toDisplayString as r}from"vue";var c=t({name:"DynamicWordCloudVue3",props:{data:{required:!0,type:Array},color:{required:!1,type:Array,default:()=>["#2D4DB6","#04B67C","#D1AF07","#E27914","#CB4A4D","#B02690"]},speed:{required:!1,type:Number,default:400},direction:{required:!1,type:String,default:"-1"}},setup(t,{emit:o}){const a=e({width:0,height:0,contentEle:[],animateID:null,curIndex:-1});a.contentEle=t.data&&t.data.map((()=>({x:0,y:0,z:0,style:{}})));const d=()=>{i(),l(),r(),a.animateID=window.requestAnimationFrame(d)},i=()=>{const e=["-1","1"].includes(t.direction)?Math.PI/(1/0):Math.PI/(Number(t.direction)/2*Number(t.speed)),n=Math.cos(e),o=Math.sin(e);a.contentEle=a.contentEle.map((t=>{const e=t.y*n-t.z*o,a=t.z*n+t.y*o;return{...t,y:e,z:a}}))},l=()=>{const e=["-2","2"].includes(t.direction)?Math.PI/(1/0):Math.PI/(Number(t.direction)*Number(t.speed)),n=Math.cos(e),o=Math.sin(e);a.contentEle=a.contentEle.map((t=>{const e=t.x*n-t.z*o,a=t.z*n+t.x*o;return{...t,x:e,z:a}}))},r=()=>{const t=a.width/2,e=a.height/2;a.contentEle=a.contentEle.map((n=>{const{x:o,y:d,z:i}=n,l=(a.width-50)/2,r=500/(500-i),c=(i+l)/(2*l),s=`translate(${o+t-30+"px"}, ${d+e-15+"px"}) scale(${r})`;return{x:o,y:d,z:i,style:{...n.style,opacity:c+.5,zIndex:parseInt((100*r).toString(),10),transform:s}}}))};return n((()=>{const e=document.getElementById("wordCloud");a.width=e&&e.clientWidth,a.height=e&&e.clientHeight,(()=>{const e=(a.width-50)/2,n=(a.height-50)/2;if(a.contentEle=[],t.data&&t.data.length)for(let o=0;o<t.data.length;o+=1){const d=(2*(o+1)-1)/t.data.length-1,i=Math.acos(d),l=i*Math.sqrt(t.data.length*Math.PI),r={x:e*Math.sin(i)*Math.cos(l),y:n*Math.sin(i)*Math.sin(l),z:e*Math.cos(i),style:{}};a.contentEle.push(r)}d()})()})),{state:a,stop:()=>{a.curIndex=-1,window.cancelAnimationFrame(a.animateID)},start:t=>{a.curIndex=t,d()},wordClick:t=>{o("wordClick",t)}}}});const s={id:"wordCloud",class:"wordCloud__tagBall"},u=["title","onMouseleave","onClick"];!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&o.firstChild?o.insertBefore(a,o.firstChild):o.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}}('@charset "UTF-8";\n.wordCloud__tagBall[data-v-019946c7] {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n\n.wordCloud__tag[data-v-019946c7] {\n  display: block;\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  text-decoration: none;\n  font-size: 15px;\n  font-family: "微软雅黑";\n  font-weight: bold;\n  cursor: pointer;\n}\n\n.wordCloud__tag[data-v-019946c7]:hover {\n  font-size: 25px;\n}\n\n.wordCloud__home[data-v-019946c7] {\n  display: flex;\n  justify-content: center;\n}'),c.render=function(t,e,n,c,h,p){return o(),a("div",s,[(o(!0),a(d,null,i(t.data,((n,d)=>(o(),a("span",{class:"wordCloud__tag",key:d,style:l({color:t.color[d%t.color?.length],...t.state.contentEle[d]?.style}),title:n.name,onMouseenter:e[0]||(e[0]=(...e)=>t.stop&&t.stop(...e)),onMouseleave:e=>t.start(d),onClick:e=>t.wordClick(n)},r(n.name),45,u)))),128))])},c.__scopeId="data-v-019946c7",c.__file="packages/dynamic-word-cloud/index.vue",c.install=t=>{t.component(c.name,c)};const h=[c];var p={install:t=>{h.map((e=>t.component(e.name,e)))}};export{c as DynamicWordCloudVue3,p as default};
